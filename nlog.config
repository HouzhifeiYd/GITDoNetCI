<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.nlog-project.org/schemas/NLog.xsd NLog.xsd"
      autoReload="true"
      throwExceptions="false"
      internalLogLevel="Off" internalLogFile="c:\nlog-internal.log">
  <variables>
    <variable name="ohtId" value="1" />
  </variables>
  <targets>
		<target name="coloredconsole" xsi:type="ColoredConsole" useDefaultRowHighlightingRules="false" 
			  layout="${longdate} ${uppercase:${level}}: ${message}">
      <highlight-row condition="level == LogLevel.Debug" foregroundColor="NoChange"/>
      <highlight-row condition="level == LogLevel.Info" foregroundColor="Green"/>
      <highlight-row condition="level == LogLevel.Warn" foregroundColor="Yellow"/>
      <highlight-row condition="level == LogLevel.Error" foregroundColor="Red"/>
		</target>
		<!--保存至文件-->
		<target name="info_file" xsi:type="File" encoding="utf-8"
			  fileName="${basedir}/logs/${var:ohtId}/Info.${date:yyyy-MM-dd}.txt"
			  archiveFileName="${basedir}/logs/Info.${date:yyyyMMdd}.{#}.txt"
			  archiveDateFormat="yyyy-MM-dd"
			  archiveAboveSize="2097152"
			  archiveNumbering="Sequence"
			  layout="${longdate}:${logger} ${message}" />
		<!--保存至文件-->
		<target name="warn_file" xsi:type="File" encoding="utf-8"
			  fileName="${basedir}/logs/${var:ohtId}/warn.${date:yyyy-MM-dd}.txt"
			  archiveFileName="${basedir}/logs/warn.${date:yyyyMMdd}.{#}.txt"
			  archiveDateFormat="yyyy-MM-dd"
			  archiveAboveSize="2097152"
			  archiveNumbering="Sequence"
			  layout="${longdate}:${logger} ${message}" />
		<!--Error保存至文件-->
		<target name="error_file" xsi:type="File" encoding="utf-8"
			  fileName="${basedir}/logs/${var:ohtId}/Error.${date:yyyy-MM-dd}.txt"
			  archiveFileName="${basedir}/logs/Error.${date:yyyy-MM-dd}.{#}.txt"
			  archiveDateFormat="yyyy-MM-dd"
			  archiveAboveSize="2097152"
			  archiveNumbering="Sequence"
			  layout="${longdate}:${logger} ${message} ${onexception:${exception:format=tostring} ${newline} ${stacktrace}" />
		<!--配置Sql Server-->
		<!--<target name="database" xsi:type="Database"
            dbProvider="System.Data.SqlClient.SqlConnection,System.Data.SqlClient"
            connectionString="Data Source=localhost;Initial Catalog=数据库名;Persist Security Info=True;User ID=账户;Password=密码"
            commandText="insert into NLog (Application, Logged, Level, Message,Logger, CallSite, Exception) values (@Application, @Logged, @Level, @Message,@Logger, @Callsite, @Exception);">
      <parameter name="@application" layout="AspNetCoreNlog" />
      <parameter name="@logged" layout="${date}" />
      <parameter name="@level" layout="${level}" />
      <parameter name="@message" layout="${message}" />
      <parameter name="@logger" layout="${logger}" />
      <parameter name="@callSite" layout="${callsite:filename=true}" />
      <parameter name="@exception" layout="${exception:tostring}" />
    </target>-->
	</targets>

	<rules>
		<!-- add your logging rules here 
    log level: Trace Debug Info Warn Error Fatal Off
            -->
		<!--<logger name="*" minlevel="Trace" maxlevel="Debug" writeTo="console" />-->
		<logger name="*" minlevel="Debug" writeTo="coloredconsole" />
		<logger rulename="info" name="*" minlevel="Info" maxlevel="Info" writeTo="info_file" />
		<logger rulename="warn" name="*" minlevel="Warn" maxlevel="Warn" writeTo="warn_file" />
		<logger rulename="error" name="*" minlevel="Error" maxlevel="Fatal" writeTo="error_file" />
		<!--配置Sql Server
    <logger name="*" minlevel="Warn" maxlevel="Error" writeTo="database" />-->
	</rules>
</nlog>